<!doctype html><html><head><title>JiDiJi: An Experiment in Musical Representation</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/assets/css/bootstrap.min.css><link rel=stylesheet href=/assets/css/layouts/main.css><link rel=stylesheet href=/assets/css/style.css><link rel=stylesheet href=/assets/css/navigators/navbar.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/assets/images/psc_emoji.png><link rel=stylesheet href=/assets/css/style.css><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};window.addEventListener('load',(event)=>{document.querySelectorAll("mjx-container").forEach(function(x){x.parentElement.classList+='has-jax'})});</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta name=description content="JiDiJi: An Experiment in Musical Representation"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/assets/css/layouts/single.css><link rel=stylesheet href=/assets/css/navigators/sidebar.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-XXXXXXXXX-X','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/assets/images/psc_emoji.png>psc's website</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/assets/images/psc_emoji.png class=d-none id=main-logo>
<img src=/assets/images/psc_emoji.png class=d-none id=inverted-logo></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><input type=text placeholder=Search data-search id=search-box><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-plus-circle"></i><a href=/posts/mentoring/>Mentoring / Education</a><ul><li><a href=/posts/mentoring/cme/>CME is A-OK</a></li><li><a href=/posts/mentoring/gridworldplayground/>GridWorld Playground</a></li><li><a href=/posts/mentoring/introduccion-a-transformers/>Intro a Transformers</a></li><li><a href=/posts/mentoring/intro-to-rl/>Intro to RL</a></li><li><a href=/posts/mentoring/resume/>Preparing your resume</a></li><li><a href=/posts/mentoring/interviewing/>Tips for Interviewing at Google</a></li><li><a href=/posts/mentoring/reviewing/>Tips for Reviewing Research Papers</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/musicode/>MUSICODE</a><ul><li><i class="fas fa-plus-circle"></i><a href=/posts/musicode/phase1/>Phase 1</a><ul><li><a href=/posts/musicode/phase1/introducing/>0-Introducing</a></li><li><a href=/posts/musicode/phase1/episode1/>1-Musical Note & Computation</a></li><li><a href=/posts/musicode/phase1/episode2/>2-Bits & Semitones</a></li><li><a href=/posts/musicode/phase1/episode3/>3-Leitmotifs & Variables</a></li><li><a href=/posts/musicode/phase1/episode4/>4-Live Coding & Jazz</a></li><li><a href=/posts/musicode/phase1/episode5/>5-Repeats & Loops</a></li></ul></li><li><a href=/posts/musicode/introducing/>Introducing</a></li><li><a href=/posts/musicode/ldd/>Losses, Dissonances, and Distortions</a></li><li><a href=/posts/musicode/hallelagine/>Portrait of Hallelagine</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/art/>Art</a><ul class=active><li><a href=/posts/art/cost-of-beauty/>Cost of Beauty</a></li><li><a href=/posts/art/covid-music/>Covid Music</a></li><li><a href=/posts/art/family/>Family</a></li><li><a class=active href=/posts/art/jidiji/>JiDiJi</a></li><li><a href=/posts/art/musical-aquarium/>Musical Aquarium</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/misc/>Misc</a><ul><li><a href=/posts/misc/agr/>Artificial General Relativity</a></li><li><a href=/posts/misc/crosswords/>Crosswords</a></li><li><a href=/posts/misc/origins/>Origins of April Fool's Day</a></li><li><a href=/posts/misc/yovoy/>yovoy</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/research/>Research</a><ul><li><i class="fas fa-plus-circle"></i><a href=/posts/research/other/>Other</a><ul><li><a href=/posts/research/other/rigl/rigl/>RigL</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/research/rl/>RL</a><ul><li><a href=/posts/research/rl/2020highlights/>2020 RL Highlights</a></li><li><a href=/posts/research/rl/pse/>Contrastive Behavioral Similarity Embeddings</a></li><li><a href=/posts/research/rl/dopamine/>Dopamine</a></li><li><a href=/posts/research/rl/loon/>Flying balloons with RL</a></li><li><a href=/posts/research/rl/metrics_continuity/>Metrics & continuity in RL</a></li><li><a href=/posts/research/rl/mico/>MICo</a></li><li><a href=/posts/research/rl/revisiting_rainbow/>Revisiting Rainbow</a></li><li><a href=/posts/research/rl/scalable/>Scalable methods ...</a></li><li><a href=/posts/research/rl/sparse_rl/>SparseRL</a></li><li><a href=/posts/research/rl/precipice/>Statistical Precipice</a></li><li><a href=/posts/research/rl/tandem/>Tandem RL</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/research/creativity/>Creativity</a><ul><li><a href=/posts/research/creativity/agence/>Agence, a dynamic film</a></li><li><a href=/posts/research/creativity/ganterpretations/>GANterpretations</a></li><li><a href=/posts/research/creativity/ml-jam/>ML-Jam</a></li></ul></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://psc-g.github.io/posts/art/jidiji/zelda.gif)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/assets/images/psc_gradient.png><h5 class=author-name>Pablo Samuel Castro</h5><p>January 14, 2018</p></div><div class=title><h1>JiDiJi: An Experiment in Musical Representation</h1></div><div class=post-content id=post-content><p>I made <a href=https://jidiji.glitch.me/>this website</a> to convert between music and colours. Read below for details!</p><h2 id=about>About</h2><p>Music can be represented in various forms: as a series of sounds, as a score, as tabs (for guitar), as a series of chord names, as MIDI, as a <a href=https://github.com/tensorflow/magenta/blob/master/magenta/protobuf/music.proto#L27>NoteSequence protocol buffer</a>, and more.</p><p>I stumbled upon the <a href=https://en.wikipedia.org/wiki/Solresol>Solresol</a> language recently, as well as upon <a href=http://cdm.link/2018/03/watch-ableton-loop-talk-connects-polyrhythms-synesthesia/>this talk</a> by <a href=http://www.adamneely.com/>Adam Neely</a>, and realized that you can also represent music as colours.</p><p>I created a mapping from MIDI pitches to RGB values. The mirrored-keyboard on the right hand side shows these mappings (the grey C key on the left keyboard is the middle C).</p><p>The name came from Sol-Re-Sol = G-D-G ~ Ji Di Ji</p><h2 id=midi-to-colours>MIDI to colours</h2><p>For converting a MIDI file into a &ldquo;painting&rdquo;, first I convert the MIDI file into a <a href=https://github.com/tensorflow/magenta/blob/master/magenta/protobuf/music.proto#L27>NoteSequence protocol buffer</a> that is quantized into sixteenth notes. This is done using <a href=https://magenta.tensorflow.org/js>magenta.js</a>.</p><p>For each sixteenth note, I convert all the notes currently being played into a square of pixels with the colour dictated by the mapping mentioned above; all these notes (which may include notes that started playing a few beats ago) are then stacked into a single column. This means that a song in 4/4 that has 32 bars will have have 32 * 16 = 512 of these columns.</p><p>For example, the following simple score:</p><img src=/posts/art/jidiji/simpleScoreExample.png alt="Simple Score Example"><p>converts to the following painting:</p><img src=/posts/art/jidiji/simpleScorePainting.png alt="Simple Score Painting"><p>In the above painting the height of this single column is given by the maximum number of concurrently playing notes (3 in this case). For beats where there are less than this, the background is filled with a beige colour (you can change the background colour in the main page).</p><p>In the above example, the notes are vertically-center-aligned. But we can also render then top-aligned:</p><img src=/posts/art/jidiji/simpleScorePaintingTop.png alt="Simple Score Painting Top Align"><p>and bottom-aligned:</p><img src=/posts/art/jidiji/simpleScorePaintingBottom.png alt="Simple Score Painting Bottom Align"><p>You can change these alignments via the controls in the main page:</p><img src=/posts/art/jidiji/vertAlignSelect.png alt="Select Vertical Alignment"><p>To avoid having very long paintings, I set a maximum width and wrap these columns around. For example, the first movement of Beethoven&rsquo;s 5th symphony would result in the following painting:</p><img src=/posts/art/jidiji/beethoven5_painting.png alt="Painting for Beethoven's 5th symphony"><p>Converting Philip Glass&rsquo;s &ldquo;Metamorphosis 1&rdquo; yields a nice visualization of minimalism in music!</p><img src=/posts/art/jidiji/glass_metamorphosis_painting.png alt="Painting for Philip Glass' Metamorphosis"><p>You can try out a few sample MIDI files in the main page, or load your own!</p><h2 id=colours-to-midi>Colours to MIDI</h2><p>The mapping from pitch to colours can be reversed, giving us a colour to pitch mapping. This means that we could take any image file (say, of a painting), and convert it into a song by converting each pixel into its corresponding note.</p><p>One problem is that we only have 88 keys in a piano, so we only have 88 &ldquo;color notes&rdquo;. Each pixel in an image file can have 16777216 different colors (256 * 256 * 256), so we need to map each of the possible colors onto one of the 88 available ones. This is essentially a nearest-neighbour problem in 3-dimensions. I used a simple <a href=https://en.wikipedia.org/wiki/K-d_tree>k-d tree</a> to perform this nearest-neighbour search.</p><p>Another problem: let&rsquo;s say we have an image that is 512 pixels wide by 1024 pixels high. This would result in a song that is 32 bars long (32 * 16 = 512), and where in each sixteenth beat there are 1024 different pitches being played. This is obviously too many pitches (and would likely completely freeze your machine).</p><p>To overcome this problem, you can specify the maximum number of simultaneous notes using the slider in the main page:</p><img src=/posts/art/jidiji/rowHeightSlider.png alt="Slider for row height"><p>If we take a painting like Renoir&rsquo;s &ldquo;Luncheon of the Boating Party&rdquo; and specify a row height of 10, during playback we would get something like:</p><p><a href=/posts/art/jidiji/renoir_playback.mp4><img src=/posts/art/jidiji/renoir_playback.gif alt="Screenshot of Renoir video playback"></a></p><p>The red bar moving around represents the pixels currently being &ldquo;played&rdquo;.</p><p>You can try out a few sample paintings in the main page or load your own!. They mostly sound chaotic (or like an infernal rave at some points), but I still think it&rsquo;s an interesting experiment. Perhaps with a modified color-to-note mapping and dynamic row-heights you could produce something a bit more musical.</p><h2 id=playback>Playback</h2><p>You can play the melodies generated from either method. The pixels in the image will light up as their corresponding note is being played. This is using <a href=https://tonejs.github.io/>Tone.js</a> for the playback, so it&rsquo;s essentially just a collection of simple waves; this means the sound is very &ldquo;8-bit&rdquo;, and the amplitudes of the sound waves can sometimes cancel themselves out.</p><p>It&rsquo;s fun to watch the pixels light up as they&rsquo;re getting played. Beethoven&rsquo;s 5th symphony makes it really easy to see where the rhythms fall:</p><p><a href=/posts/art/jidiji/beethoven5.mp4><img src=/posts/art/jidiji/beethoven5.gif alt="Playback of Beethoven's 5th"></a></p><p>Another fun one is Legend of Zelda - Labyrinth (Crystal version):</p><p><a href=/posts/art/jidiji/zelda.mp4><img src=/posts/art/jidiji/zelda.gif alt="Playback of Zelda"></a></p><p>Of the images I provide, my favourite is the music you get from Michael Creese&rsquo;s &ldquo;Pointillism Skull&rdquo;, especially the sounds you get in the areas outside of the skull:</p><p><a href=/posts/art/jidiji/point.mp4><img src=/posts/art/jidiji/point.gif alt="Playback of Zelda"></a></p><h2 id=unraveling-bolero>Unraveling Bolero</h2><p>Recently I heard an excellent Radiolab podcast called <a href=https://www.wnycstudios.org/story/unraveling-bolero/>Unraveling Bolero</a> which finally motivated me to code up this idea. In the podcast they describe a painter, Anne Adams, that developed <a href=https://en.wikipedia.org/wiki/Aphasia>progressive aphasia</a>. During the last moments of her disease, she became obsessed with <a href=https://en.wikipedia.org/wiki/Maurice_Ravel>Maurice Ravel&rsquo;s</a> Bolero, and ultimately produced her painting &ldquo;Unraveling Bolero&rdquo;:</p><img src=/posts/art/jidiji/bolero_large.jpeg alt="Anne Adam's Unraveling Bolero"><p>It turns out that Ravel also suffered from aphasia, and Bolero was composed towards the end of his disease. Apparently a recurring symptom of aphasia is the tendency to focus on very repetitive patterns.</p><p>I thought it would be interesting to see what it would look like to convert Ravel&rsquo;s Bolero (in MIDI form) to a painting. I was quite surprised to see the resulting painting when using the &ldquo;top&rdquo; alignment:</p><img src=/posts/art/jidiji/boleroPainting.png alt="JiDiJi version of Bolero"><p>There is a striking resemblance in the inverted-triangle pattern throughout both the Anne Adams painting and the MIDI-to-colours painting. Perhaps Anne Adams was able to capture an essential underlying structural component of Ravel&rsquo;s composition that went beyond a simple repetitive pattern.</p><h2 id=whats-next>What&rsquo;s next?</h2><p>There are a few things I&rsquo;d like to do to improve this. If you&rsquo;re interested and/or have a good idea for how to do it, send me a note!</p><ul><li>I&rsquo;d love to be able to make the sound better, but am unsure how to do it.</li><li>I think it&rsquo;d be cool if the images get &ldquo;painted&rdquo; as the playback progresses (i.e. starts off white and as each pixel gets played, it gets placed on the page). This is a little tricky since only pixels that have been mapped to a real note get &ldquo;activated&rdquo;, and not all pixels are properly mapped to a note.</li><li>I&rsquo;d like to make it less intensive on the browser, especially for bigger songs/images. I tried using <a href=https://p5js.org/>p5.js</a> but it actually made it heavier on the browser, and the playback became really choppy.</li><li>I&rsquo;ve only tested this on Chrome, and I think it only really works properly on Chrome. Would be nice to support other browsers.</li><li>I&rsquo;d like to be able to save image and/or MIDI files directly from the page.</li><li>I&rsquo;d love to port this into Python (or any other non-browser language) to run this process in batch and create an image dataset of songs. Then train one of the many image generative models out there (a <a href=https://en.wikipedia.org/wiki/Generative_adversarial_network>GAN</a> maybe?) to be able to generate new music through pixels.</li></ul><h2 id=sharing>Sharing</h2><p>If you&rsquo;re like to retwee this work, <a href=https://twitter.com/pcastr/status/1029330794152644609>here&rsquo;s the original tweet</a>.</p></div><div class=btn-improve-page><a href=https://github.com/psc-g/psc-g.github.io/edit/master/content/posts/art/jidiji.md><i class="fas fa-code-branch"></i>Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/research/rl/dopamine/ class="btn btn-outline-info"><span><i class="fas fa-chevron-circle-left"></i>Prev</span><br><span>Dopamine: A framework for flexible value-based reinforcement learning research</span></a></div><div class="col-md-6 next-article"><a href=/posts/art/family/ class="btn btn-outline-info"><span>Next <i class="fas fa-chevron-circle-right"></i></span><br><span>Family - Over the Years</span></a></div></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;var disqus_shortname="does-not-exist";dsq.src="//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#about>About</a></li><li><a href=#midi-to-colours>MIDI to colours</a></li><li><a href=#colours-to-midi>Colours to MIDI</a></li><li><a href=#playback>Playback</a></li><li><a href=#unraveling-bolero>Unraveling Bolero</a></li><li><a href=#whats-next>What&rsquo;s next?</a></li><li><a href=#sharing>Sharing</a></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=#publications>Publications</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span><a href=https://twitter.com/@pcastr target=_blank>Twitter <i class="fab fa-twitter"></i></a></span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/assets/images/inverted-logo.png>
Toha</a></div><div class="col-md-4 text-center">© 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/assets/images/hugo-logo-wide.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/assets/js/jquery-3.4.1.min.js></script><script src=/assets/js/popper.min.js></script><script src=/assets/js/bootstrap.min.js></script><script src=/assets/js/navbar.js></script><script src=/assets/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/assets/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>